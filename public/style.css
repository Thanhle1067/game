:root{ --bg: rgba(0,0,0,0); --accent:#00e5ff }
*{ box-sizing:border-box } html,body{ width:100%; height:100%; margin:0; background:var(--bg); font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif }
#root{ width:100vw; height:100vh; position:relative; overflow:hidden }

/* Stages (accent color) */
.stage1{ --accent:#00e5ff } .stage2{ --accent:#50d8ff } .stage3{ --accent:#ff4040 }

.bonus{ position:absolute; top:40%; left:50%; transform:translate(-50%,-40%); font-size:72px; font-weight:900; color:var(--accent);
        text-shadow:0 0 18px rgba(0,0,0,.25); opacity:0; transition:opacity .4s ease, transform .4s ease; pointer-events:none; z-index:20 }
.bonus.show{ opacity:1; transform:translate(-50%,-50%) }

.stage-tag{ position:absolute; bottom:10px; left:50%; transform:translateX(-50%);
  background:rgba(0,0,0,.5); border:1px solid rgba(255,255,255,.25); color:#fff; padding:6px 14px; border-radius:12px; font-weight:800; z-index:20; backdrop-filter: blur(4px) }

/* Bars */
.bars{ position:absolute; inset:0; pointer-events:none; z-index:10; background: url("./bars.png") center/cover no-repeat; transform:translateX(-100%);
  opacity:0; transition:transform .8s ease, opacity .2s ease, filter .3s ease; box-shadow: inset 0 0 40px rgba(0,0,0,.6) }
.bars.show{ transform: translateX(0); opacity:1 } .stage2 .bars{ filter:hue-rotate(20deg) } .stage3 .bars{ filter:hue-rotate(-10deg) saturate(1.2) }

@keyframes bars-shake{ 0%{ transform: translateX(0) } 20%{ transform: translateX(-8px) } 40%{ transform: translateX(8px) } 60%{ transform: translateX(-6px) } 80%{ transform: translateX(6px) } 100%{ transform: translateX(0) } }
.bars.shake{ animation: bars-shake .6s ease both }

#counterWrap{ position:absolute; bottom:14vh; left:50%; transform:translateX(-50%); padding:8px 16px; background:rgba(0,0,0,.35); border-radius:12px; border:1px solid rgba(255,255,255,.25) }
#counter{ font-size:clamp(44px,7vw,80px); font-weight:900; color:#fff; text-shadow:0 4px 16px rgba(0,0,0,.6) }
#unit{ font-size:clamp(18px,2vw,28px); font-weight:800; margin-left:6px; color:#fff }

/* Fire layers */
.fire{ position:absolute; left:0; right:0; bottom:-20px; height:32vh; pointer-events:none; opacity:0; z-index:12; filter: blur(0.2px) }
@keyframes flicker { 0%{ transform:scaleY(1)} 50%{ transform:scaleY(1.08)} 100%{ transform:scaleY(1)} }
.fire::before{ content:""; position:absolute; inset:0; background-repeat:repeat-x; background-size: auto 100%; animation:flicker 1.6s ease-in-out infinite }
.fire-blue{ }
.fire-blue::before{ background-image:url('fire-blue.svg') }
.fire-red{ }
.fire-red::before{ background-image:url('fire-red.svg') }
.stage2 .fire-blue{ opacity:1 } .stage3 .fire-red{ opacity:1 }

/* Ghost + Bats for stage 3 */
.ghost, .bat{ position:absolute; pointer-events:none; opacity:0; z-index:13 }
.stage3 .ghost{ opacity:1; width:120px; bottom:20vh; left:6vw; animation:float 3.5s ease-in-out infinite }
@keyframes float{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-16px) } }
.bat{ width:90px; top:15vh }
.stage3 .bat{ opacity:1; animation: fly 8s linear infinite }
.bat1{ left:-120px; animation-delay:0s } .bat2{ left:-220px; top:8vh; animation-delay:3s }
@keyframes fly{ 0%{ transform:translateX(0) } 100%{ transform:translateX(120vw) } }

/* Fireworks canvas */
#fx{ position:absolute; inset:0; z-index:19; pointer-events:none }

/* Bomb (rescue visual kept) */
.bomb{ position:absolute; width:140px; height:140px; left:50%; margin-left:-70px; top:-180px; opacity:0; pointer-events:none; z-index:18;
  background:url('./bomb.svg') center/contain no-repeat; transform: translateY(0); transition: transform 1.2s cubic-bezier(.34,1.56,.64,1), opacity .3s }
.bomb.drop{ opacity:1; transform: translateY(70vh) } .bomb.explode{ background:url('./explosion.svg') center/contain no-repeat; transform: translateY(70vh) scale(1.7); opacity:0; transition: transform .6s ease-out, opacity .6s }